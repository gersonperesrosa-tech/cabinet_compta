{% extends "base.html" %}

{% block content %}

<div class="container py-4">

    <div class="d-flex justify-content-between align-items-center mb-4">
        <h3>Modifier la note</h3>
        <a href="{% url 'user_notes' %}" class="btn btn-outline-secondary">← Retour à mes notes</a>
    </div>

    <div class="row">

        <!-- ========================= -->
        <!-- Colonne 1 : Formulaire édition -->
        <!-- ========================= -->
        <div class="col-md-8">

            <div class="card mb-4">
                <div class="card-header fw-bold">Modifier la note</div>
                <div class="card-body">

                    <form method="POST">
                        {% csrf_token %}
                        <input type="hidden" name="edit_note" value="1">

                        <!-- Titre -->
                        <label class="form-label">Titre</label>
                        <input type="text" name="titre" class="form-control mb-3"
                               value="{{ note.titre }}">

                        <!-- Catégorie -->
                        <label class="form-label">Catégorie</label>
                        <select name="categorie" class="form-control mb-3">
                            <option value="">Aucune</option>
                            {% for cat in categories %}
                                <option value="{{ cat.id }}"
                                    {% if note.categorie and note.categorie.id == cat.id %}selected{% endif %}>
                                    {{ cat.nom }}
                                </option>
                            {% endfor %}
                        </select>

                        <!-- Contenu -->
                        <label class="form-label">Contenu</label>
                        <textarea name="contenu" class="form-control mb-3" rows="6">{{ note.contenu }}</textarea>

                        <div class="d-flex justify-content-between">
                            <a href="{% url 'user_notes' %}" class="btn btn-outline-secondary">Annuler</a>
                            <button class="btn btn-primary">Enregistrer les modifications</button>
                        </div>

                    </form>

                </div>
            </div>

        </div>

        <!-- ========================= -->
        <!-- Colonne 2 : Actions -->
        <!-- ========================= -->
        <div class="col-md-4">

            <div class="card">
                <div class="card-header fw-bold">Actions</div>
                <div class="card-body">

                    <p class="text-muted">Vous pouvez également supprimer cette note.</p>

                    <a href="{% url 'delete_user_note' note.id %}"
                       class="btn btn-danger w-100">
                        Supprimer la note
                    </a>

                </div>
            </div>

        </div>

    </div>

</div>

{% endblock %}
